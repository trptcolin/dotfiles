#!/usr/bin/env bash

set -e

# Basics
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew cask install 1password

# Terminal programs
brew install git hg zsh vim tmux reattach-to-user-namespace \
  watch tree wrk
echo "$(which zsh)" | sudo tee -a /etc/shells
chsh -s $(which zsh)

git clone git@github.com:trptcolin/vimfiles.git ~/vimfiles
pushd ~/vimfiles
./update_bundles
ln -s ~/vimfiles ~/.vim
ln -s ~/.vim/.vimrc ~/.vimrc
popd

# Mac apps
brew tap caskroom/versions
brew cask install google-chrome firefox \
  libreoffice evernote \
  google-drive dropbox box-sync \
  crashplan \
  caffeine flycut hammerspoon \
  zoomus skype slack colloquy \
  iterm2 gpgtools vagrant virtualbox \
  dash3 yed freemind omnigraffle6 \
  wireshark keybase ngrok \
  docker

brew install terraform
pip install awscli --upgrade --user
pip install awsebcli --upgrade --user

# Dev languages
brew install rbenv cmake
brew cask install java
brew cask install java7
brew install boot-clj
brew install leiningen
brew install elixir

brew install postgresql

easy_install pygments

# CodeClimate local analysis
docker pull codeclimate/codeclimate
brew tap codeclimate/formulae
brew install codeclimate

# Node + static analysis
brew install node
brew install yarn
codeclimate engines:install checks
codeclimate engines:install duplication
codeclimate engines:install eslint
codeclimate engines:install fixme
codeclimate engines:install nodesecurity
codeclimate engines:install requiresafe

launchctl start org.openbsd.ssh-agent
